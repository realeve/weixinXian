function getScoreOrder(){$.ajax({url:"//cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreOrder&score="+gb.userInfo.score,data:{sportid:gb.sportid},async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.peopleNums=e.allPeople,gb.userInfo.scoreOrder=e.scoreOrder,gb.userInfo.scorePropt=e.lessThan,$('[name="totals"]').text(gb.userInfo.peopleNums),$('[name="ltdOrder"]').text(gb.userInfo.scoreOrder),$('[name="scorePropt"]').text(gb.userInfo.scorePropt),$('[name="scoreProptDesc"]').text(Number.parseFloat(gb.userInfo.scorePropt)>50?"，想想是不是有点小激动呢？":"。"),getScoreOrderByDpt()})}function getScoreOrderByDpt(){$.ajax({url:"//cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreOrderByDpt&score="+gb.userInfo.score+"&dpt="+gb.userInfo.user_dpt,data:{sportid:gb.sportid},async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dpt={},gb.userInfo.dpt.all=e.dpt_people,gb.userInfo.dpt.peopleNums=e.allPeople,gb.userInfo.dpt.scoreOrder=e.scoreOrder,gb.userInfo.dpt.scorePropt=e.lessThan,$('[name="dptName"]').text(gb.userInfo.user_dpt),$('[name="dptCrewNum"]').text(gb.userInfo.dpt.all),$('[name="dptTotals"]').text(gb.userInfo.dpt.peopleNums),$('[name="dptOrder"]').text(gb.userInfo.dpt.scoreOrder),$('[name="dptScorePropt"]').text(gb.userInfo.dpt.scorePropt),getTimeLength()})}function getScoreRangeOption(e,t){return userScore=10*Math.floor(Number.parseInt(gb.userInfo.score)/10),t.grid.x=35,t.yAxis=[{type:"category",show:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{textStyle:{color:"rgba(255, 255, 255, 0.6)"}},data:[]}],e.map(function(e,o){t.yAxis[0].data.push(e.score),userScore!=e.score?t.series[0].data.push(e.nums):t.series[0].data.push({value:e.nums,itemStyle:{normal:{color:"#95E570"}},label:{normal:{show:!0,formatter:"你的分数 "+gb.userInfo.score+" 分"}}})}),t}function getTimeLength(){$.ajax({url:"//cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getTimeLength",data:{dpt:gb.userInfo.user_dpt,sportid:gb.sportid},async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dptTime=e.dptTime,gb.userInfo.ltdTime=e.ltdTime,$('[name="timeDesc1"]').text(Number.parseInt(gb.userInfo.timeUsed)<Number.parseInt(gb.userInfo.dptTime)?"低于":"高于"),$('[name="timeDesc2"]').text(Number.parseInt(gb.userInfo.timeUsed)<Number.parseInt(gb.userInfo.ltdTime)?"低于":"高于"),$('[name="dptTimeLength"]').text((Number.parseInt(gb.userInfo.dptTime)/60).toFixed(1)),$('[name="ltdTimeLength"]').text((Number.parseInt(gb.userInfo.ltdTime)/60).toFixed(1)),getAnsweredRatio()})}function getAnsweredRatio(){$.ajax({url:"//cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getAnsweredRatio",data:{sportid:gb.sportid},async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dptCompare.answerRatio=e,$('[name="mostPeople"]').text(e[0].dpt),$('[name="answeredPrpt"]').text(e[0].answeredRatio),e[0].dpt!=gb.userInfo.user_dpt?$('[name="answerRatioDesc"]').text(",赶快邀请小伙伴们来参与吧。"):$('[name="answerRatioDesc"]').text("，告诉小伙伴们要继续努力哦。"),getScoreCompare()})}function getScoreCompare(){$.ajax({url:"//cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreCompare",data:{sportid:gb.sportid},async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dptCompare.scoreCompare=e,$('[name="highestScore"]').text(e[0].dpt),$('[name="highestScorePrpt"]').text(e[0].score),getScoreRangeByDpt()})}function getScoreRangeByDpt(){$.ajax({url:"//cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreRangeByDpt&dpt="+gb.userInfo.user_dpt,data:{sportid:gb.sportid},async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){var t=e[e.length-1];$('[name="dptMostScore"]').text(t.score),$('[name="dptMostScoreNum"]').text(t.nums),gb.sportid==SPORT.PARTY&&$('[name="dptMostScoreDesc"]').text("他们一定在“两学一做”学习教育中狠抓落实，对党的相关知识熟记于心了。"),gb.userInfo.dptScoreOrder=e,getScoreRange()})}function getScoreRange(){$.ajax({url:"//cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreRange",data:{sportid:gb.sportid},async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.scoreRange=e;for(var t=2;8>=t;t++)gb.option[t]=getOptions(t);initDom()})}require("./vendors/jquery.fullPage.js"),require("./vendors/fakeLoader.js/fakeLoader.js");var echarts=require("./vendors/echarts.common.js"),SPORT=require("./global/sport.js"),SPORTNAME=require("./global/sportname.js"),gb=require("./global/chartConfig.js"),util=require("./exam/chartFunc.js"),uid=util.getUrlParam("uid");gb.sportid=util.getUrlParam("sid");var setSportDpt=function(){$("#fakeLoader").fakeLoader({timeToHide:6e5,bgColor:"#9b59b6",spinner:"spinner7"}),$(".fl").parent().append('<p class="center" style="position:absolute;width:100%;top:60%;color:#fff">载入中</p>');for(var e=1;7>e;e++)gb.dom[e]=document.getElementById("chart"+e);$('[name="sportname"]').text(SPORTNAME[gb.sportid]);var t=[];t[0]='<p style="font-size: 1em;padding-top:30px;">安全保卫部</p><p style="font-size: 1em">企业文化部</p>',t[1]='<p style="font-size: 1em;padding-top:30px;">党委组织部</p><p style="font-size: 1em">党委宣传部</p><p style="font-size: 1em">公司团委</p>',t[2]='<p style="font-size: 1em;padding-top:30px;">管三党支部</p>',t[3]='<p style="font-size: 1em;padding-top:30px;">计划财务部</p><p style="font-size: 1em">党委宣传部</p>',t[4]='<p style="font-size: 1em;padding-top:30px;">中钞长城贵金属有限公司</p>',t[5]='<p style="font-size: 1em;padding-top:30px;">能源环保部</p>',t[6]='<p style="font-size: 1em;padding-top:30px;">中国人民银行商洛市中心支行</p>',t[7]='<p style="font-size: 1em;padding-top:30px;">中国人民银行商洛市中心支行</p>',$('[name="sportMaster"]').html(t[gb.sportid])}(),handleCounterup=function(e,t){$().counterUp&&e.counterUp({delay:10,time:t})},getOptions=function(e){var t;return 2!=e||gb.optionRenderFlag[e-2]?3!=e||gb.optionRenderFlag[e-2]?4!=e||gb.optionRenderFlag[e-2]?5!=e||gb.optionRenderFlag[e-2]?6!=e||gb.optionRenderFlag[e-2]?7!=e||gb.optionRenderFlag[e-2]?void 0:(t=util.initOption(),t.tooltip={trigger:"item",formatter:"{a} <br/>{b} :{c}分"},t.series=[{name:"平均得分",type:"bar",label:{normal:{show:!0,position:"insideRight",textStyle:{fontSize:15},formatter:"{b}\n{c}分"}},itemStyle:{normal:{color:function(e){return gb.color[e.dataIndex]}}},data:[],animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}}],gb.userInfo.dptCompare.scoreCompare.map(function(e){t.yAxis[0].data.push(e.dpt),t.series[0].data.push(e.score)}),t.yAxis[0].data.reverse(),t.series[0].data.reverse(),gb.optionRenderFlag[e-2]=!0,t):(t={color:gb.color,tooltip:{trigger:"item",formatter:"{a} <br/>{b}分 : {c}人 ({d}%)"},legend:{show:!1,orient:"vertical",left:"left",data:[]},series:[{name:"得分分布",type:"pie",radius:"60%",center:["50%","50%"],data:[],label:{normal:{textStyle:{color:"#334"},formatter:"{b}分\n({d}%)"}},labelLine:{normal:{length:10,lineStyle:{color:"#334"}}},animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}}]},gb.userInfo.dptScoreOrder.map(function(e){t.legend.data.push(e.score),t.series[0].data.push({name:e.score,value:e.nums})}),gb.optionRenderFlag[e-2]=!0,t):(t=util.initOption(),t.series=[{name:"已参与",type:"bar",barMaxWidth:60,stack:"比例",label:{normal:{show:!1,position:"insideLeft",textStyle:{fontSize:15},formatter:function(e){return e.name+"\n"+e.value.toFixed(2)+"%"}}},itemStyle:{normal:{color:function(e){return gb.color[e.dataIndex]}}},data:[],animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}},{name:"未参与",type:"bar",barMaxWidth:60,stack:"比例",label:{normal:{show:!0,position:"insideRight",textStyle:{fontSize:15},formatter:function(e){return e.name+"\n"+(100-e.value).toFixed(2)+"%"}}},itemStyle:{normal:{color:gb.colors.whiteMediumLight}},data:[],animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}}],gb.userInfo.dptCompare.answerRatio.map(function(e){t.yAxis[0].data.push(e.dpt);var o=Number.parseFloat(e.answeredRatio);t.series[0].data.push(o),t.series[1].data.push(100-o)}),t.series[0].data[0]>50&&(t.series[0].label.normal.show=!0,t.series[1].label.normal.show=!1),t.yAxis[0].data.reverse(),t.series[0].data.reverse(),t.series[1].data.reverse(),gb.optionRenderFlag[e-2]=!0,t):(t=util.initOption(),t.series[0].data=[],t.yAxis[0].data=["全公司",gb.userInfo.user_dpt,gb.userInfo.user_name],t.series[0].name="答题时间",t.series[0].data=[(Number.parseInt(gb.userInfo.ltdTime)/60).toFixed(1),(Number.parseInt(gb.userInfo.dptTime)/60).toFixed(1),{value:(Number.parseInt(gb.userInfo.timeUsed)/60).toFixed(1),itemStyle:{normal:{color:"rgb(99,201,99)",label:{textStyle:{color:"#fff"}}}}}],t.series[0].itemStyle.normal.label={show:!0,textStyle:{fontSize:18,color:"#333"},position:"insideLeft",formatter:"{b}:{c}分钟"},gb.optionRenderFlag[e-2]=!0,t):(t=util.initOption(),t.series[0].data=[],t=getScoreRangeOption(gb.userInfo.dptScoreOrder,t),gb.optionRenderFlag[e-2]=!0,t):(t=util.initOption(),t.series[0].data=[],t=getScoreRangeOption(gb.userInfo.scoreRange,t),gb.optionRenderFlag[e-2]=!0,t)},initDom=function(){$("#fullpage").fullpage({navigation:!0,afterRender:function(e,t){for(var o=1;7>o;o++)gb.myChart[o-1]=echarts.init(gb.dom[o]);$(window).resize(function(){for(var e=1;7>e;e++)gb.myChart[e-1].resize()}),7==e&&"down"==t&&$(".iSlider-arrow").hide()},afterLoad:function(e,t){handleCounterup($(".section:nth("+(t-1)+")").find(".number"),500),t>=2&&7>=t&&(gb.myChart[t-2]=echarts.init(gb.dom[t-1]),gb.myChart[t-2].setOption(gb.option[t])),8==t?$(".iSlider-arrow").hide():$(".iSlider-arrow").show()}}),$(".hidden").removeClass("hidden"),gb.loadComplete||($("#fakeLoader").hide(),gb.loadComplete=!0)},refreshData=function(){$.ajax({url:"//cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getSafeExamData&uid="+uid,data:{sportid:gb.sportid},async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){if(gb.loadBscInfo=e.status,gb.loadBscInfo){gb.userInfo=e,gb.userInfo.dptCompare={},gb.userInfo.user_dpt=gb.userInfo.user_dpt.trim(),$('[name="userName"]').text(gb.userInfo.user_name),$('[name ="userOrder"]').text(gb.userInfo.answerOrder),$('[name="userScore"]').text(gb.userInfo.score),gb.windowTitle="我在本次"+SPORTNAME[gb.sportid]+"答题活动获得了"+gb.userInfo.score+"分，你也来参加吧！",document.title=gb.windowTitle,gb.sportid==SPORT.PARTYJZ&&($(".section").last().find("p:nth(2)").hide(),$(".section").last().find("p:nth(3)").hide(),$(".section").last().find("p:nth(1)").text("管三党支部").css("font-size","1.5em")),100==gb.userInfo.score?$('[name="myErr"]').hide():$('[name="myErr"]').attr("href",window.location.href.replace("score","error"));var t=Math.floor(Number.parseInt(gb.userInfo.timeUsed)/60),o=Number.parseInt(gb.userInfo.timeUsed)%60;$('[name="userMinuteLength"]').text(t),$('[name="userSecondLength"]').text(o);var r=Number.parseInt(gb.userInfo.score)>=80?"这是一个不错的分数哟":"下次还需要继续努力呢";$('[name="scoreDesc"]').text(r),$('[name="answerTimes"]').text("1"==gb.userInfo.iTimes?"仅用了一次机会便":"用了两次机会"),getScoreOrder()}})}();
//# sourceMappingURL=score.min.js.map